import{_ as g,m as v,o as n,c as d,a as t,w as c,d as h,F as _,g as f,t as i,f as b,n as A}from"./index-1fab7d48.js";const C={data(){return{appointments:[],appointmentId:{},status:0,statusNames:["Pending","Approved","Completed","Cancelled","All"],statusBColors:["#FEF0C7","#E0F2FE","#E4FBCC","#FEE4E2"],statusColors:["#93370D","#065986","#326212","#912018"],isLoading:!0}},created(){this.getAppointments()},methods:{async getAppointments(){const a={page:0,take:50};await this.$appAxios.post("/appointment/get",a,{headers:{Authorization:`Bearer ${this._token}`}}).then(s=>{this.appointments=s.data.data,this.isLoading=!1}).catch(s=>{alert(s.message)})},async updateAppointment(){const a={id:this.appointmentId,status:parseInt(this.status)};await this.$appAxios.post("/appointment/changestatus",a,{headers:{Authorization:`Bearer ${this._token}`}}).then(s=>{if(this.saveLoading=!1,this.editAppointment={},!s.hasError){let l=this.appointments.filter(r=>r.id==this.appointmentId);l&&(l[0].status=a.status)}$("#editAppointmentModal").modal("hide"),alert(s.data.message)}).catch(s=>{alert(s.message)})}},computed:{...v(["_token"])}},y={class:"table-responsive"},k={class:"table table-sm table-bordered table-striped"},x=t("thead",null,[t("tr",null,[t("th",null,"Business"),t("th",null,"Date"),t("th",null,"Price"),t("th",null,"Status"),t("th")])],-1),F=t("td",{class:"align-middle",colspan:"4"},[t("div",{class:"loader"})],-1),B=[F],E={class:"text-center align-middle"},w={class:"text-center align-middle"},L={class:"text-center align-middle"},I={class:"text-center align-middle"},S={class:"text-center align-middle"},D=["onClick"],M=t("i",{class:"fa-solid fa-edit"},null,-1),P=[M],z={class:"modal fade",id:"editAppointmentModal",tabindex:"-1",role:"dialog","aria-labelledby":"editAppointmentModalLabel","aria-hidden":"true"},N={class:"modal-dialog",role:"document"},U={class:"modal-content"},V={class:"modal-header"},G=t("h5",{class:"modal-title",id:"editAppointmentModalLabel"},"Edit Status",-1),H=t("a",{type:"a",class:"close","data-dismiss":"modal","aria-label":"Close"},[t("span",{"aria-hidden":"true"},"×")],-1),j={class:"modal-body"},q={class:"form-group row"},J={class:"col-md-12"},K=t("label",{for:"service"},"Status",-1),O=t("option",{value:"0"},"Pending",-1),Q=t("option",{value:"1"},"Approved",-1),R=t("option",{value:"2"},"Completed",-1),T=t("option",{value:"3"},"Cancelled",-1),W=[O,Q,R,T],X={class:"modal-footer"},Y={class:"loader"};function Z(a,s,l,r,o,u){return n(),d(_,null,[t("div",y,[t("table",k,[x,t("tbody",null,[c(t("tr",null,B,512),[[h,o.isLoading]]),(n(!0),d(_,null,f(this.appointments,e=>(n(),d("tr",{key:e.id},[t("td",E,i(e.business.name),1),t("td",w,i(a.$filters.formatDateAndHour(e.startDate)),1),t("td",L,i(e.details.reduce((p,m)=>p+m.discountPrice,0))+" ₺",1),t("td",I,[t("span",{style:A([{display:"block",width:"100%",padding:"5px",color:"#fff"},{backgroundColor:o.statusBColors[e.status],color:o.statusColors[e.status]}])},i(o.statusNames[e.status]),5)]),t("td",S,[t("a",{style:{color:"#FFBF00"},class:"nav-link",onClick:p=>{o.appointmentId=e.id,o.status=e.status},"data-toggle":"modal","data-target":"#editAppointmentModal"},P,8,D)])]))),128))])])]),t("div",z,[t("div",N,[t("div",U,[t("div",V,[G,t("p",null,[t("small",null," ("+i(o.appointmentId)+")",1)]),H]),t("div",j,[t("div",q,[t("div",J,[K,c(t("select",{class:"form-control","onUpdate:modelValue":s[0]||(s[0]=e=>o.status=e)},W,512),[[b,o.status]])])])]),t("div",X,[c(t("div",Y,null,512),[[h,a.saveLoading]]),t("a",{class:"btn btn-warning",onClick:s[1]||(s[1]=e=>u.updateAppointment())},"Update")])])])])],64)}const st=g(C,[["render",Z]]);export{st as default};
