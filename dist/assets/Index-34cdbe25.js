import{_ as h,m as c,o,c as n,a as s,w as u,d as m,i as p,F as f}from"./index-32bfea91.js";const g={data(){return{user:{imageUrl:null},file:null,alerts:[],isLoading:!1,hasError:!1}},created(){var e;this.user.imageUrl=(e=this.$store.state.user)==null?void 0:e.imageUrl},methods:{previewFiles(){this.file=this.$refs.file.files[0];var e=new FileReader;e.readAsDataURL(this.file),e.onload=function(t){this.user.imageUrl=t.target.result}.bind(this)},async saveImage(){this.alerts=[],this.hasError=!1,this.isLoading=!0;const e=new FormData;e.append("file",this.file),await this.$appAxios.post("/user/setprofilephoto",e,{headers:{Authorization:`Bearer ${this._token}`,"Content-Type":"multipart/form-data"}}).then(i=>{this.isLoading=!1;var i=i.data;i.hasError?(this.hasError=!0,alert(i.message)):this.$appAxios.post("/user/get",null,{headers:{Authorization:`Bearer ${this._token}`}}).then(a=>{var r;this.$store.commit("setUser",(r=a==null?void 0:a.data)==null?void 0:r.data)})}).catch(t=>{this.hasError=!0,alert("Error : "+t.message),this.isLoading=!1}),this.hasError||(alert("Resim başarılı bir şekilde yüklenmiştir"),this.$router.push({path:"/"}))}},computed:{...c(["_token"])}},_={class:"row"},v={class:"col-sm-12",style:{display:"table","text-align":"center",margin:"0 auto"}},y={style:{width:"200px",height:"200px","border-radius":"100%",overflow:"hidden",margin:"0 auto",position:"relative",background:"#ddd","text-align":"center"}},k={key:0,style:{display:"inline-block","font-size":"120px","padding-top":"35px"},class:"fa-solid fa-user"},w=["src"],x={class:"row mt-5 float-right"},b={class:"loader"};function E(e,t,i,a,r,l){return o(),n(f,null,[s("div",_,[s("div",v,[s("div",y,[this.user.imageUrl==null?(o(),n("i",k)):(o(),n("img",{key:1,style:{width:"200px",height:"200px",display:"inline-block"},src:this.user.imageUrl},null,8,w))]),s("input",{class:"file-upload mt-3",ref:"file",type:"file",accept:"image/*",onChange:t[0]||(t[0]=(...d)=>l.previewFiles&&l.previewFiles(...d))},null,544)])]),s("div",x,[u(s("div",b,null,512),[[m,r.isLoading]]),this.file!=null&&!this.isLoading?(o(),n("button",{key:0,class:"btn btn-success",onClick:t[1]||(t[1]=(...d)=>l.saveImage&&l.saveImage(...d))},"Resmi Kaydet")):p("",!0)])],64)}const F=h(g,[["render",E]]);export{F as default};
