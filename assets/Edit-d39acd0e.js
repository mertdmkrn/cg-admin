import{_ as g,m as f,r as _,o as r,c as n,a as s,w as a,d,i as p,q as v,v as l,h as b,F as m,g as E,t as y}from"./index-7fc6677b.js";const w={data(){return{campaign:{id:"00000000-0000-0000-0000-000000000000",businessId:null,path:null,url:null,isActive:!1,sortOrder:1},businesses:[{item1:"00000000-0000-0000-0000-000000000000",item2:"NULL"}],alerts:[],file:null,isLoading:!0,isShowForm:!0,hasError:!1}},created(){var i=this.$route.params.id;i!==void 0&&i!=="00000000-0000-0000-0000-000000000000"?(this.isNewCampaign=!1,this.getCampaign(i)):this.isLoading=!1},mounted(){this.getBusinessSelectList()},methods:{previewFiles(){this.file=this.$refs.file.files[0]},async getCampaign(i){await this.$appAxios.post("/campaign/getbyid",i).then(t=>{this.isLoading=!1,t.hasError==!0||t.data.data==null?(this.isShowForm=!1,alert(t.data.message),this.$router.push({path:"/campaigns"})):this.campaign=t.data.data}).catch(t=>{alert("Error : "+t.message),this.$router.push({path:"/campaigns"})})},async saveCampaign(){$(".form-control").css("border","none"),this.alerts=[],this.hasError=!1,this.isLoading=!0,this.campaign.id!="00000000-0000-0000-0000-000000000000"?await this.$appAxios.post("/campaign/update",this.campaign,{headers:{Authorization:`Bearer ${this._token}`}}).then(t=>{this.isLoading=!1;var t=t.data;t.hasError&&t.validationErrors.length>0?(this.hasError=!0,t.validationErrors.forEach(e=>{$("#"+e.key).css("border","2px solid red"),this.alerts.push(e.key+" : "+e.value)})):this.hasError=!1}).catch(i=>{this.hasError=!0,alert("Error : "+i.message)}):await this.$appAxios.post("/campaign/save",this.campaign,{headers:{Authorization:`Bearer ${this._token}`}}).then(t=>{this.isLoading=!1;var t=t.data;t.hasError&&t.validationErrors.length>0?(this.hasError=!0,t.validationErrors.forEach(e=>{$("#"+e.key).css("border","2px solid red"),this.alerts.push(e.key+" : "+e.value)})):this.hasError=!1}).catch(i=>{this.hasError=!0,alert("Error : "+i.message)}),this.hasError||this.$router.push({path:"/campaigns"})},async fileUpload(){this.alerts=[],this.hasError=!1,this.isLoading=!0;const i=new FormData;i.append("file",this.file),await this.$appAxios.post("/admin/uploadfile",i,{headers:{Authorization:`Bearer ${this._token}`,"Content-Type":"multipart/form-data"}}).then(e=>{this.isLoading=!1;var e=e.data;e.hasError?(this.hasError=!0,alert(e.message)):(this.campaign.path=e.data,this.file=null)}).catch(t=>{this.hasError=!0,alert("Error : "+t.message),this.isLoading=!1}),this.hasError||alert("Resim başarılı bir şekilde yüklenmiştir")},async getBusinessSelectList(){await this.$appAxios.post("/business/getnames",null,{headers:{Authorization:`Bearer ${this._token}`}}).then(i=>{this.isLoading=!1,i.hasError==!0||i.data.data==null?(this.isShowForm=!1,alert(i.data.message)):this.businesses=i.data.data}).catch(i=>{alert("Error : "+i.message)})}},computed:{...f(["_token"])}},k={key:0},U={class:"form-group row"},x=s("label",{for:"businessId",class:"col-sm-2 col-form-label"},"Upload Image",-1),L={class:"col-sm-8 mb-2"},A={class:"loader"},C={key:0,class:"col-sm-2"},V={class:"form-group row"},B=s("label",{for:"businessId",class:"col-sm-2 col-form-label"},"Business",-1),S={class:"col-sm-10"},I={class:"form-group row"},F=s("label",{for:"path",class:"col-sm-2 col-form-label"},"Title / TitleEn",-1),T={class:"col-sm-5"},z={class:"col-sm-5"},O={class:"form-group row"},D=s("label",{for:"path",class:"col-sm-2 col-form-label"},"About / AboutEn",-1),M={class:"col-sm-5"},N={class:"col-sm-5"},R={class:"form-group row"},q=s("label",{for:"path",class:"col-sm-2 col-form-label"},"Condition / ConditionEn",-1),G={class:"col-sm-5"},j={class:"col-sm-5"},H={class:"form-group row"},J=s("label",{for:"path",class:"col-sm-2 col-form-label"},"Image Url",-1),K={class:"col-sm-10"},P={class:"form-group row"},Q=s("label",{for:"path",class:"col-sm-2 col-form-label"},"Image Url",-1),W={class:"col-sm-10"},X={class:"form-group row"},Y=s("label",{for:"url",class:"col-sm-2 col-form-label"},"Redirect Url",-1),Z={class:"col-sm-10"},ss={class:"form-group row"},ts=s("label",{for:"sortorder",class:"col-sm-2 col-form-label"},"Order",-1),os={class:"col-sm-10"},is={class:"form-group row"},as=s("div",{class:"col-sm-2"},"Active",-1),es={class:"col-sm-10"},ls={class:"form-check"},rs={class:"form-group row"},ns={class:"col-sm-12"},ds={class:"loader"},cs={class:"row"},hs={key:0,class:"col-sm-4"},ps=["src"],ms={class:"col-sm-6 alert alert-danger",role:"alert"};function us(i,t,e,gs,c,h){const u=_("ModelListSelect");return r(),n(m,null,[this.isShowForm?(r(),n("form",k,[s("div",U,[x,s("div",L,[a(s("div",A,null,512),[[d,c.isLoading]]),a(s("input",{class:"file-upload",ref:"file",type:"file",accept:"image/*",onChange:t[0]||(t[0]=(...o)=>h.previewFiles&&h.previewFiles(...o))},null,544),[[d,!c.isLoading]])]),this.file!=null?(r(),n("div",C,[s("a",{class:"btn btn-success",style:{float:"right"},onClick:t[1]||(t[1]=(...o)=>h.fileUpload&&h.fileUpload(...o))},"Upload")])):p("",!0)]),s("div",V,[B,s("div",S,[this.campaign!=null?(r(),v(u,{key:0,list:this.businesses,modelValue:this.campaign.businessId,"onUpdate:modelValue":t[2]||(t[2]=o=>this.campaign.businessId=o),"option-value":"item1","option-text":"item2",id:"businessId",placeholder:"Select Business"},null,8,["list","modelValue"])):p("",!0)])]),s("div",I,[F,s("div",T,[a(s("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>this.campaign.title=o),class:"form-control",id:"title",placeholder:"Title"},null,512),[[l,this.campaign.title]])]),s("div",z,[a(s("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=o=>this.campaign.titleEn=o),class:"form-control",id:"titleEn",placeholder:"TitleEn"},null,512),[[l,this.campaign.titleEn]])])]),s("div",O,[D,s("div",M,[a(s("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=o=>this.campaign.about=o),class:"form-control",id:"about",placeholder:"About"},null,512),[[l,this.campaign.about]])]),s("div",N,[a(s("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=o=>this.campaign.aboutEn=o),class:"form-control",id:"aboutEn",placeholder:"AboutEn"},null,512),[[l,this.campaign.aboutEn]])])]),s("div",R,[q,s("div",G,[a(s("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=o=>this.campaign.condition=o),class:"form-control",id:"condition",placeholder:"Condition"},null,512),[[l,this.campaign.condition]])]),s("div",j,[a(s("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=o=>this.campaign.conditionEn=o),class:"form-control",id:"conditionEn",placeholder:"ConditionEn"},null,512),[[l,this.campaign.conditionEn]])])]),s("div",H,[J,s("div",K,[a(s("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=o=>this.campaign.path=o),class:"form-control",id:"path",placeholder:"Image Url"},null,512),[[l,this.campaign.path]])])]),s("div",P,[Q,s("div",W,[a(s("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=o=>this.campaign.path=o),class:"form-control",id:"path",placeholder:"Image Url"},null,512),[[l,this.campaign.path]])])]),s("div",X,[Y,s("div",Z,[a(s("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=o=>this.campaign.url=o),class:"form-control",id:"url",placeholder:"Redirect Url"},null,512),[[l,this.campaign.url]])])]),s("div",ss,[ts,s("div",os,[a(s("input",{type:"number","onUpdate:modelValue":t[12]||(t[12]=o=>this.campaign.sortOrder=o),class:"form-control",id:"sortOrder"},null,512),[[l,this.campaign.sortOrder]])])]),s("div",is,[as,s("div",es,[s("div",ls,[a(s("input",{"onUpdate:modelValue":t[13]||(t[13]=o=>this.campaign.isActive=o),class:"form-check-input",type:"checkbox",id:"isActive"},null,512),[[b,this.campaign.isActive]])])])]),s("div",rs,[s("div",ns,[a(s("div",ds,null,512),[[d,c.isLoading]]),a(s("a",{onClick:t[14]||(t[14]=o=>this.saveCampaign()),style:{float:"right"},class:"btn btn-success float-sm-right"},"Save",512),[[d,!c.isLoading]])])])])):p("",!0),s("div",cs,[this.campaign.path!=null?(r(),n("div",hs,[s("img",{src:this.campaign.path,width:"300",loading:"lazy",decoding:"async",onerror:"this.src = null"},null,8,ps)])):p("",!0),a(s("div",ms,[(r(!0),n(m,null,E(this.alerts,o=>(r(),n("p",null,y(o),1))),256))],512),[[d,this.hasError]])])],64)}const _s=g(w,[["render",us]]);export{_s as default};
