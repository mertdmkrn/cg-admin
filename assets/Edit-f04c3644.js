import{_ as u,m as g,r as _,o as r,c as l,a as t,h as f,i as n,w as i,v as c,j as v,d,F as p,g as b,t as E}from"./index-c7f8cf53.js";const k={data(){return{campaign:{id:"00000000-0000-0000-0000-000000000000",businessId:"00000000-0000-0000-0000-000000000000",path:null,url:null,isActive:!1,sortOrder:1},businesses:[{id:"00000000-0000-0000-0000-000000000000",name:"NULL"}],alerts:[],isLoading:!0,isShowForm:!0,hasError:!1}},created(){var e=this.$route.params.id;e!==void 0&&e!=="00000000-0000-0000-0000-000000000000"?(this.isNewCampaign=!1,this.getCampaign(e)):this.isLoading=!1},methods:{async getCampaign(e){await this.$appAxios.post("/campaign/getbyid",e).then(s=>{this.isLoading=!1,s.hasError==!0||s.data.data==null?(this.isShowForm=!1,alert(s.data.message),this.$router.push({path:"/campaigns"})):this.campaign=s.data.data}).catch(s=>{alert("Error : "+s.message),this.$router.push({path:"/campaigns"})})},async saveCampaign(){$(".form-control").css("border","none"),this.alerts=[],this.hasError=!1,this.isLoading=!0,this.campaign.id!="00000000-0000-0000-0000-000000000000"?await this.$appAxios.post("/campaign/update",this.campaign,{headers:{Authorization:`Bearer ${this._token}`}}).then(s=>{this.isLoading=!1;var s=s.data;s.hasError&&s.validationErrors.length>0?(this.hasError=!0,s.validationErrors.forEach(o=>{$("#"+o.key).css("border","2px solid red"),this.alerts.push(o.key+" : "+o.value)})):this.hasError=!1}).catch(e=>{this.hasError=!0,alert("Error : "+e.message)}):await this.$appAxios.post("/campaign/save",this.campaign,{headers:{Authorization:`Bearer ${this._token}`}}).then(s=>{this.isLoading=!1;var s=s.data;s.hasError&&s.validationErrors.length>0?(this.hasError=!0,s.validationErrors.forEach(o=>{$("#"+o.key).css("border","2px solid red"),this.alerts.push(o.key+" : "+o.value)})):this.hasError=!1}).catch(e=>{this.hasError=!0,alert("Error : "+e.message)}),this.hasError||this.$router.push({path:"/campaigns"})}},computed:{...g(["_token"])}},w={key:0},y={class:"form-group row"},x=t("label",{for:"businessId",class:"col-sm-2 col-form-label"},"Business",-1),L={class:"col-sm-10"},A={class:"form-group row"},U=t("label",{for:"path",class:"col-sm-2 col-form-label"},"Image Url",-1),C={class:"col-sm-10"},S={class:"form-group row"},V=t("label",{for:"url",class:"col-sm-2 col-form-label"},"Redirect Url",-1),B={class:"col-sm-10"},I={class:"form-group row"},F=t("label",{for:"sortorder",class:"col-sm-2 col-form-label"},"Order",-1),O={class:"col-sm-10"},M={class:"form-group row"},N=t("div",{class:"col-sm-2"},"Active",-1),z={class:"col-sm-10"},D={class:"form-check"},R={class:"form-group row"},j={class:"col-sm-12"},G={class:"loader"},T={class:"row"},q={key:0,class:"col-sm-4"},H=["src"],J={class:"col-sm-6 alert alert-danger",role:"alert"};function K(e,s,o,P,h,Q){const m=_("ModelListSelect");return r(),l(p,null,[this.isShowForm?(r(),l("form",w,[t("div",y,[x,t("div",L,[this.campaign!=null?(r(),f(m,{key:0,list:this.businesses,modelValue:this.campaign.businessId,"onUpdate:modelValue":s[0]||(s[0]=a=>this.campaign.businessId=a),"option-value":"id","option-text":"name",id:"businessId",placeholder:"Select Business"},null,8,["list","modelValue"])):n("",!0)])]),t("div",A,[U,t("div",C,[i(t("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=a=>this.campaign.path=a),class:"form-control",id:"path",placeholder:"Image Url"},null,512),[[c,this.campaign.path]])])]),t("div",S,[V,t("div",B,[i(t("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=a=>this.campaign.url=a),class:"form-control",id:"url",placeholder:"Redirect Url"},null,512),[[c,this.campaign.url]])])]),t("div",I,[F,t("div",O,[i(t("input",{type:"number","onUpdate:modelValue":s[3]||(s[3]=a=>this.campaign.sortOrder=a),class:"form-control",id:"sortOrder"},null,512),[[c,this.campaign.sortOrder]])])]),t("div",M,[N,t("div",z,[t("div",D,[i(t("input",{"onUpdate:modelValue":s[4]||(s[4]=a=>this.campaign.isActive=a),class:"form-check-input",type:"checkbox",id:"isActive"},null,512),[[v,this.campaign.isActive]])])])]),t("div",R,[t("div",j,[i(t("div",G,null,512),[[d,h.isLoading]]),i(t("a",{onClick:s[5]||(s[5]=a=>this.saveCampaign()),class:"btn btn-success float-sm-right"},"Save",512),[[d,!h.isLoading]])])])])):n("",!0),t("div",T,[this.campaign.path!=null?(r(),l("div",q,[t("img",{src:this.campaign.path,width:"300",onerror:"this.src = null"},null,8,H)])):n("",!0),i(t("div",J,[(r(!0),l(p,null,b(this.alerts,a=>(r(),l("p",null,E(a),1))),256))],512),[[d,this.hasError]])])],64)}const X=u(k,[["render",K]]);export{X as default};
