import{_ as x,m as k,r as c,o as i,c as n,a as e,w as d,v as M,e as h,f as u,F as _,g,i as p,j as U,d as w,t as a}from"./index-1fab7d48.js";const L={data(){return{page:1,perPage:7,records:0,users:[],editUser:{},searchModel:{page:null,take:null,email:null,city:null,gender:3,role:""},isLoading:!0,saveLoading:!1,genderList:["Women","Male","Unspecified","Nothing"],cities:[]}},created(){this.getUsers(),this.getCities()},methods:{async getCities(){this.isLoading=!0,await this.$appAxios.post("/definition/getcities").then(l=>{this.cities=l.data.data.map(t=>({name:t,value:t})),this.isLoading=!1}).catch(l=>{alert(l.message)})},async getUsers(){this.users=[],this.isLoading=!0,this.searchModel.page=this.page-1,this.searchModel.take=this.perPage,await this.$appAxios.post("/admin/getusers",this.searchModel,{headers:{Authorization:`Bearer ${this._token}`}}).then(l=>{this.users=l.data.data,this.records=this.users.length>0?this.users[0].itemCount:0,this.isLoading=!1}).catch(l=>{alert(l.message)})},async deleteUser(l){confirm("Do you want to delete the record?!")&&await this.$appAxios.post("/admin/deleteuser",l.id,{headers:{Authorization:`Bearer ${this._token}`}}).then(t=>{if(alert(t.data.message),!t.data.hasError){var r=this.users.indexOf(l);r>-1&&(this.users.splice(r,1),this.records--)}}).catch(t=>{alert(t.message)})}},computed:{...k(["_token"])}},C={style:{"margin-bottom":"10px"}},V=e("summary",null,"Filter",-1),D={class:"form-group-sm row p-3",style:{border:"1px solid #e3e6f0","border-radius":"1px",width:"99.95%","margin-left":"0.025%"}},A={class:"col-md-3"},S=e("label",{class:"col-form-label-sm",for:"name"},"Email",-1),N={class:"col-md-3"},P=e("label",{class:"col-form-label-sm",for:"city"},"City",-1),B={class:"col-md-3"},E=e("label",{class:"col-form-label-sm",for:"workingGenderType"},"Gender",-1),G=["value"],z={class:"col-md-3"},T=e("label",{class:"col-form-label-sm",for:"workingGenderType"},"Role",-1),F=e("option",{value:""},"Nothing",-1),I=e("option",{value:"User"},"User",-1),R=e("option",{value:"Admin"},"Admin",-1),j=[F,I,R],O={class:"col-md-1 mt-4 d-none d-lg-flex"},W={class:"col-md-12 mt-1 d-flex d-lg-none"},q={class:"table-responsive"},H={class:"table table-sm table-bordered table-striped"},J=e("th",null,"Image",-1),K=e("th",null,"Name",-1),Q=e("th",null,"City - Province",-1),X=e("th",null,"Created Date",-1),Y=e("th",null,"Gender",-1),Z=e("th",null,"Telephone",-1),$=e("th",null,"Email",-1),ee=e("th",null,"Role",-1),se={style:{width:"40px"}},te=e("i",{class:"fa-solid fa-plus"},null,-1),oe=e("td",{class:"align-middle",colspan:"9"},[e("div",{class:"loader"})],-1),le=[oe],ie={class:"text-center align-middle"},ne={style:{width:"60px",margin:"0 auto",background:"#e3e6f0",height:"60px","border-radius":"100%","font-size":"25px"}},ae=["src"],de={key:1,class:"fa-solid fa-user",style:{"padding-top":"18px"}},re={class:"text-center align-middle"},ce={class:"text-center align-middle"},he={class:"text-center align-middle"},_e={class:"text-center align-middle"},me={class:"text-center align-middle"},ue={class:"text-center align-middle"},ge={class:"text-center align-middle"},pe={class:"text-center align-middle"},fe=["onClick"],ye=e("i",{class:"fa-solid fa-trash"},null,-1),be=[ye];function ve(l,t,r,xe,o,f){const y=c("ModelListSelect"),b=c("router-link"),v=c("pagination");return i(),n(_,null,[e("details",C,[V,e("div",D,[e("div",A,[S,d(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>o.searchModel.email=s),class:"form-control form-control-sm",id:"email"},null,512),[[M,o.searchModel.email]])]),e("div",N,[P,h(y,{list:this.cities,modelValue:o.searchModel.city,"onUpdate:modelValue":t[1]||(t[1]=s=>o.searchModel.city=s),id:"city","option-value":"value","option-text":"name",class:"form-control form-control-sm",placeholder:"Select City"},null,8,["list","modelValue"])]),e("div",B,[E,d(e("select",{class:"form-control form-control-sm","onUpdate:modelValue":t[2]||(t[2]=s=>o.searchModel.gender=s)},[(i(!0),n(_,null,g(this.genderList,(s,m)=>(i(),n("option",{key:s,value:m},a(s),9,G))),128))],512),[[u,o.searchModel.gender]])]),e("div",z,[T,d(e("select",{class:"form-control form-control-sm","onUpdate:modelValue":t[3]||(t[3]=s=>o.searchModel.role=s)},j,512),[[u,o.searchModel.role]])]),e("div",O,[o.saveLoading?p("",!0):(i(),n("a",{key:0,onClick:t[4]||(t[4]=s=>{this.page=1,this.getUsers()}),class:"btn btn-sm m-2 btn-primary"},"Search"))]),e("div",W,[o.saveLoading?p("",!0):(i(),n("a",{key:0,onClick:t[5]||(t[5]=s=>{this.page=1,this.getUsers()}),class:"btn d-block btn-sm m-2 btn-primary",style:{width:"105%"}},"Search"))])])]),e("div",q,[e("table",H,[e("thead",null,[e("tr",null,[J,K,Q,X,Y,Z,$,ee,e("th",se,[h(b,{to:"/user/add",class:"btn btn-success btn-user btn-block",title:"ADD ADMIN"},{default:U(()=>[te]),_:1})])])]),e("tbody",null,[d(e("tr",null,le,512),[[w,o.isLoading]]),(i(!0),n(_,null,g(this.users,s=>(i(),n("tr",{key:s.id},[e("td",ie,[e("div",ne,[s.imageUrl!=null?(i(),n("img",{key:0,src:s.imageUrl,width:"60",height:"60",loading:"lazy",decoding:"async",style:{"border-radius":"100%"}},null,8,ae)):(i(),n("i",de))])]),e("td",re,a(s.fullName),1),e("td",ce,a(s.city??"-"),1),e("td",he,a(l.$filters.formatDate(s.createDate)),1),e("td",_e,a(o.genderList[s.gender]),1),e("td",me,a(s.telephone),1),e("td",ue,a(s.email),1),e("td",ge,a(s.role),1),e("td",pe,[e("a",{style:{color:"#DE3163"},onClick:m=>this.deleteUser(s),class:"nav-link"},be,8,fe)])]))),128))])]),h(v,{modelValue:o.page,"onUpdate:modelValue":t[6]||(t[6]=s=>o.page=s),records:o.records,"per-page":o.perPage,onPaginate:f.getUsers},null,8,["modelValue","records","per-page","onPaginate"])])],64)}const Me=x(L,[["render",ve]]);export{Me as default};
